<template id="coralite-author">
  <span>{{ name }}</span>
  <time ref="time" datetime="{{ datetime }}">
    {{ localeDate }}
  </time>
</template>

<script type="module">
  import { defineComponent } from 'coralite/plugins'

  export default defineComponent({
    tokens: {
      localeDate(values) {
        return new Date(values.datetime).toLocaleDateString('en-AU', {
          weekday: 'short',
          year: '2-digit',
          month: 'short',
          day: 'numeric'
        })
      }
    },
    script({ values }, { refs }) {
      const timeElement = refs('time')

      timeElement.setAttribute('data-was-here', values.datetime)
    }
  })
</script>