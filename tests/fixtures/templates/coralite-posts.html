<template id="coralite-posts">
  {{ posts }}
</template>

<script type="module">
  import { defineComponent, aggregation } from 'coralite'

  export default defineComponent({
    id: 'coralite-posts',
    values: {
      posts (values) {
        const pages = values.path ? parseInt(values.path) : 10
        const options = {
          path: values.path,
          template: 'coralite-post',
          pages
        }

        if (values.filter) {
          options.filter = function (meta) {
            return (meta.name === 'country' && (meta.content === 'au' || meta.content === 'mx'))
          }
        }

        return aggregation(options)
      }
    }
  })
</script>